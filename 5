
에러 메시지 libluajit-5.1.so.2: cannot open shared object file: No such file or directory는 Nginx가 실행 중 LuaJIT 라이브러리를 찾지 못하고 있다는 것을 의미합니다. 이는 libluajit-5.1.so.2 파일이 올바른 위치에 없거나, 동적 라이브러리 로드 경로(LD_LIBRARY_PATH)가 설정되지 않았기 때문입니다.

해결 방법
1. LuaJIT 라이브러리 파일 위치 확인
LuaJIT이 설치된 디렉토리에서 라이브러리 파일이 있는지 확인하세요:

bash
복사
편집
find /usr/local/lib -name "libluajit-5.1.so*"
정상적으로 설치되었다면 /usr/local/lib 경로에 파일이 있어야 합니다. 예:

plaintext
복사
편집
/usr/local/lib/libluajit-5.1.so.2
2. 라이브러리 로드 경로 설정
Nginx가 LuaJIT 라이브러리를 올바르게 로드할 수 있도록 환경 변수와 시스템 설정을 수정합니다.

방법 1: LD_LIBRARY_PATH 환경 변수 설정
일시적으로 환경 변수를 설정합니다:

bash
복사
편집
export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH
이 설정을 영구적으로 적용하려면 ~/.bashrc 또는 /etc/profile 파일에 추가합니다:

bash
복사
편집
echo 'export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH' >> ~/.bashrc
source ~/.bashrc
방법 2: ldconfig로 시스템 라이브러리 캐시 갱신
/usr/local/lib 경로를 라이브러리 경로에 추가합니다:

bash
복사
편집
echo "/usr/local/lib" | sudo tee -a /etc/ld.so.conf.d/local.conf
라이브러리 캐시를 갱신합니다:

bash
복사
편집
sudo ldconfig
변경된 경로를 확인합니다:

bash
복사
편집
ldconfig -p | grep libluajit
출력이 다음과 같다면 설정이 완료된 것입니다:

plaintext
복사
편집
libluajit-5.1.so.2 (libc6,x86-64) => /usr/local/lib/libluajit-5.1.so.2
3. Nginx 실행 확인
라이브러리 경로가 설정된 후 Nginx를 다시 실행합니다:

bash
복사
편집
nginx -v
또는 설정 파일을 테스트합니다:

bash
복사
편집
nginx -t
4. 추가 확인
LuaJIT 버전 확인
LuaJIT이 올바르게 설치되었는지 확인합니다:

bash
복사
편집
luajit -v
출력 예:

plaintext
복사
편집
LuaJIT 2.1.0-beta3 -- Copyright (C) 2005-2023 Mike Pall.
Nginx가 LuaJIT을 참조하도록 빌드 확인
Nginx가 Lua 모듈과 LuaJIT을 올바르게 참조하는지 확인합니다:

bash
복사
편집
nginx -V
출력에 다음과 같은 항목이 포함되어야 합니다:

plaintext
복사
편집
--add-module=/usr/local/src/lua-nginx-module
--with-ld-opt=-Wl,-rpath,/usr/local/lib
에러 원인
LuaJIT 라이브러리가 기본 시스템 라이브러리 경로에 포함되지 않았습니다.
Nginx가 빌드 시 LuaJIT 라이브러리를 동적으로 로드하도록 설정되었지만, 라이브러리 파일을 찾지 못했습니다.
