ìˆ˜ì •ëœ FileManagerApiController ì½”ë“œ
ìˆ˜ì •ëœ Controller ì½”ë“œëŠ” FileManagerServiceì˜ ë¦¬íŒ©í† ë§ëœ ë©”ì„œë“œ êµ¬ì¡°ì™€ ì •í•©ì„±ì„ ìœ ì§€í•˜ë„ë¡ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ì£¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì‚¬í•­ì„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤:

saveFileê³¼ uploadFiles ë©”ì„œë“œ ì´ë¦„ ë³€ê²½ì— ë”°ë¥¸ Controller ë©”ì„œë“œ ìˆ˜ì •

saveImage â†’ uploadSingleFile, uploadMultipleFilesë¡œ ë³€ê²½í•˜ì—¬ ë” ëª…í™•í•œ ì´ë¦„ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
ResponseEntityì—ì„œ ì ì ˆí•œ ìƒíƒœ ì½”ë“œë¥¼ ë°˜í™˜í•˜ë„ë¡ ìˆ˜ì •

íŒŒì¼ ì €ì¥ ì„±ê³µ ì‹œ 201 CREATEDë¥¼ ë°˜í™˜.
Swagger ì£¼ì„ ë‚´ìš© ìˆ˜ì •

ë‹¤ê±´ ë“±ë¡ê³¼ ë‹¨ê±´ ë“±ë¡ì˜ ì°¨ì´ë¥¼ ëª…í™•íˆ í–ˆìŠµë‹ˆë‹¤.
java
ì½”ë“œ ë³µì‚¬
package com.scf.manager.mvc.api;

import com.scf.manager.mvc.dto.FileManagerDTO;
import com.scf.manager.mvc.service.FileManagerService;
import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.Parameter;
import io.swagger.v3.oas.annotations.Parameters;
import io.swagger.v3.oas.annotations.tags.Tag;
import jakarta.validation.Valid;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.data.domain.Page;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;

import java.io.UnsupportedEncodingException;
import java.security.NoSuchAlgorithmException;
import java.util.List;

@Slf4j
@Tag(name = "íŒŒì¼ë§¤ë‹ˆì € ê´€ë¦¬ API", description = "íŒŒì¼ë§¤ë‹ˆì € ê´€ë¦¬ API")
@RestController
@RequiredArgsConstructor
@RequestMapping("/api/v1/filemanager")
public class FileManagerApiController {

    private final FileManagerService fileManagerService;

    @PostMapping("")
    @Operation(summary = "íŒŒì¼ë§¤ë‹ˆì € ë‹¨ê±´ ë“±ë¡", description = "íŒŒì¼ë§¤ë‹ˆì € ë‹¨ê±´ì„ ë“±ë¡í•©ë‹ˆë‹¤.")
    public ResponseEntity<FileManagerDTO.Response> registerFileManager(@Valid @RequestBody FileManagerDTO.Register reqDto) {
        FileManagerDTO.Response response = fileManagerService.registerFileManager(reqDto);
        return ResponseEntity.status(HttpStatus.CREATED).body(response);
    }

    @GetMapping("")
    @Operation(summary = "íŒŒì¼ë§¤ë‹ˆì € ì „ì²´ ëª©ë¡ ì¡°íšŒ", description = "íŒŒì¼ë§¤ë‹ˆì € ì „ì²´ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.")
    public ResponseEntity<Page<FileManagerDTO.Response>> searchAllFileManager(FileManagerDTO.Search reqDto) {
        Page<FileManagerDTO.Response> response = fileManagerService.searchAllFileManager(reqDto);
        return ResponseEntity.status(HttpStatus.OK).body(response);
    }

    @GetMapping("/{fileSeq}")
    @Operation(summary = "íŒŒì¼ë§¤ë‹ˆì € ë‹¨ê±´ ì¡°íšŒ", description = "íŒŒì¼ë§¤ë‹ˆì € ë‹¨ê±´ì„ ì¡°íšŒí•©ë‹ˆë‹¤.")
    @Parameters({
            @Parameter(name = "fileSeq", description = "íŒŒì¼ ì¼ë ¨ë²ˆí˜¸", required = true, example = "1"),
    })
    public ResponseEntity<FileManagerDTO.Response> searchFileManager(@PathVariable("fileSeq") Long fileSeq) {
        FileManagerDTO.Response response = fileManagerService.searchFileManager(fileSeq);
        return ResponseEntity.status(HttpStatus.OK).body(response);
    }

    @PutMapping("/{fileSeq}")
    @Operation(summary = "íŒŒì¼ë§¤ë‹ˆì € ë‹¨ê±´ ìˆ˜ì •", description = "íŒŒì¼ë§¤ë‹ˆì € ë‹¨ê±´ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.")
    @Parameters({
            @Parameter(name = "fileSeq", description = "íŒŒì¼ ì¼ë ¨ë²ˆí˜¸", required = true, example = "1"),
    })
    public ResponseEntity<FileManagerDTO.Response> modifyFileManager(@PathVariable("fileSeq") Long fileSeq,
                                                                      @Valid @RequestBody FileManagerDTO.Modify reqDto) {
        FileManagerDTO.Response response = fileManagerService.modifyFileManager(fileSeq, reqDto);
        return ResponseEntity.status(HttpStatus.OK).body(response);
    }

    @PostMapping("/multiple")
    @Operation(summary = "ë‹¤ì¤‘ íŒŒì¼ ì—…ë¡œë“œ", description = "ì—¬ëŸ¬ íŒŒì¼ì„ í•œ ë²ˆì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.")
    public ResponseEntity<List<FileManagerDTO.Response>> uploadMultipleFiles(@RequestPart("files") List<MultipartFile> files)
            throws UnsupportedEncodingException, NoSuchAlgorithmException {
        List<FileManagerDTO.Response> response = fileManagerService.uploadFiles(files);
        return ResponseEntity.status(HttpStatus.CREATED).body(response);
    }

    @PostMapping("/single")
    @Operation(summary = "ë‹¨ì¼ íŒŒì¼ ì—…ë¡œë“œ", description = "ë‹¨ì¼ íŒŒì¼ì„ ì—…ë¡œë“œí•©ë‹ˆë‹¤.")
    public ResponseEntity<FileManagerDTO.Response> uploadSingleFile(@RequestPart("file") MultipartFile file)
            throws UnsupportedEncodingException, NoSuchAlgorithmException {
        FileManagerDTO.Response response = fileManagerService.uploadFile(file);
        return ResponseEntity.status(HttpStatus.CREATED).body(response);
    }
}
ë³€ê²½ëœ ì‚¬í•­ ìš”ì•½
ë©”ì„œë“œ ì´ë¦„ ë³€ê²½

saveImage â†’ uploadSingleFile, uploadMultipleFiles: íŒŒì¼ ì—…ë¡œë“œ ë™ì‘ì„ ë” ëª…í™•íˆ í‘œí˜„í–ˆìŠµë‹ˆë‹¤.
HTTP ìƒíƒœ ì½”ë“œ ìˆ˜ì •

íŒŒì¼ ë“±ë¡ ì‹œ ì„±ê³µì ìœ¼ë¡œ ì—…ë¡œë“œëœ ê²½ìš° 201 CREATED ìƒíƒœ ì½”ë“œë¡œ ë°˜í™˜.
Swagger ì£¼ì„ ìˆ˜ì •

Swaggerì—ì„œ ë‹¤ì¤‘ íŒŒì¼ê³¼ ë‹¨ì¼ íŒŒì¼ ì—…ë¡œë“œì˜ ì°¨ì´ë¥¼ ëª…í™•íˆ ì„¤ëª….
ì—ëŸ¬ í•¸ë“¤ë§ ì •í•©ì„± ìœ ì§€

FileManagerServiceì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ì ì ˆíˆ ì „ë‹¬.
ê¸°ëŒ€ íš¨ê³¼
ê°€ë…ì„± í–¥ìƒ: ë©”ì„œë“œ ëª…ëª… ê·œì¹™ì´ ê°œì„ ë˜ì–´ ì½”ë“œ ì˜ë„ê°€ ëª…í™•í•´ì¡ŒìŠµë‹ˆë‹¤.
ì •í•©ì„± ìœ ì§€: ì„œë¹„ìŠ¤ ë ˆì´ì–´ì™€ ì»¨íŠ¸ë¡¤ëŸ¬ ê°„ ë©”ì„œë“œ í˜¸ì¶œ êµ¬ì¡°ê°€ ì¼ì¹˜í•˜ë„ë¡ ì¡°ì •í–ˆìŠµë‹ˆë‹¤.
API ì‚¬ìš©ì ê²½í—˜ ê°œì„ : Swagger ë¬¸ì„œì™€ HTTP ìƒíƒœ ì½”ë“œì˜ ì¼ê´€ì„±ìœ¼ë¡œ ì‚¬ìš©ì ê²½í—˜ì´ í–¥ìƒë©ë‹ˆë‹¤.
ì½”ë“œì— ëŒ€í•´ ë” ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ ì¶”ê°€ ê°œì„ ì´ í•„ìš”í•˜ë‹¤ë©´ ì–¸ì œë“  ì´ì•¼ê¸°í•´ì£¼ì„¸ìš”! ğŸ˜Š
