jib {
    from {
        image = "harbor-paasdev.samsungsdscloud.com/cvc/cvc-scanner-base:17-debian"
    }
    to {
        image = "harbor-paasdev.samsungsdscloud.com/cvc/cvc-scanner:${version}"
    }
    container {
        jvmFlags = [
            "-javaagent:/app/opentelemetry-javaagent.jar"
        ]
        mainClass = "com.cvc.scanner.CVCScannerApplication"
        environment = [
            "OTEL_EXPORTER_OTLP_ENDPOINT": "http://otel-collector:4317",
            "OTEL_METRICS_EXPORTER"      : "otlp",
            "OTEL_SERVICE_NAME"          : "cvc-otel-agent",
            "OTEL_TRACES_EXPORTER"       : "otlp",
            "OTEL_LOGS_EXPORTER"         : "otlp"
        ]
    }
    extraDirectories {
        paths = file("libs")
        permissions = [
            "/app/opentelemetry-javaagent.jar": "755"
        ]
    }
}