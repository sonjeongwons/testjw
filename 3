package com.example.demo;

import com.ahnlab.v3engine.V3Scanner;
import jakarta.annotation.PostConstruct;
import lombok.extern.slf4j.Slf4j;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.context.properties.ConfigurationPropertiesScan;


import java.util.TimeZone;
@Slf4j
@ConfigurationPropertiesScan
@SpringBootApplication
public class DemoApplication {

	@PostConstruct
	public void started(){
		TimeZone.setDefault(TimeZone.getTimeZone("UTC"));
		log.info("--------------CVC API Server started");
		String externalConfigPath = "/usr/local/v3engine/v3daemon/V3Scanner.properties";
		if(!V3Scanner.setConfPropertiesPath(externalConfigPath))	// 예제는 예제프로그램과 동일한 디렉토리에 설정파일이 있는 경우다.
		{
			log.warn("configuration properties failed... using default properties: {}", V3Scanner.getConfPropertiesPath());
		}
		else{
			log.info("configuration properties loaded successfully: {}", V3Scanner.getConfPropertiesPath());
		}
	}

	public static void main(String[] args) {
		SpringApplication.run(DemoApplication.class, args);

	}

}
